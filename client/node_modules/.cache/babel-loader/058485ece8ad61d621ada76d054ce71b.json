{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\he125\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Dev\\\\Git\\\\Aihub_webTrack\\\\Learn\\\\week5\\\\Day1\\\\pr1_react\\\\client\\\\src\\\\components\\\\Review.js\",\n    _s = $RefreshSig$();\n\n// import reviewData from \"../data/review.json\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport backUrl from \"../data/port.json\";\nimport { useCookies } from \"react-cookie\";\nimport Detailed from \"./Review/Detailed\";\nimport ControlReview from \"./Review/ControlReview\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Review = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [cookies, setCookie, removeCookie] = useCookies([\"userData\"]);\n  const [reviewData, setReviewData] = useState([]);\n  useEffect(() => {\n    if (cookies === undefined) {\n      navigate(\"/\");\n    }\n\n    getReviewData(); //리뷰 데이터 가져오기\n  }, []); // 최초 1회 렌더링 시에만 동작\n\n  const getReviewData = () => {\n    try {\n      axios.get(backUrl.url + \"/posts\", {\n        headers: {\n          // axios 요청으로 인증을 위해 함께 보낼 accessToken이 담긴 헤더 작성\n          accessToken: cookies.userData.accessToken\n        }\n      }).then(res => {\n        console.log(res);\n        setReviewData(res.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    } catch (e) {\n      navigate(\"/\");\n    }\n  }; // ------------삭제-----------\n\n\n  const deleteReview = async shortId => {\n    return await axios.get(backUrl.url + `/posts/${shortId}/delete`, {\n      headers: {\n        accessToken: cookies.userData.accessToken\n      }\n    });\n  };\n\n  const onClickDeleteButton = shortId => {\n    if (window.confirm(\"삭제 하시겠습니까?\")) {\n      console.log(shortId);\n      deleteReview(shortId).then(res => {\n        let getNewDataAfterDelete = reviewData.filter(item => item.shortId !== shortId);\n        setReviewData(getNewDataAfterDelete);\n      }).catch(e => {});\n    } else {\n      //아니오\n      return;\n    }\n  }; //---------------------------\n  //--------------Update-------\n\n\n  const onClickUpdateButton = shortId => {};\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-5 text-center container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row py-lg-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-6 col-md-8 mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"fw-light\",\n            children: \"Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"lead text-muted\",\n            children: [\"\\uB9AC\\uBDF0\\uD558\\uACE0 \\uC2F6\\uC740 \\uC601\\uD654\\uB97C \\uCD94\\uAC00\\uD558\\uACE0, \\uBCC4\\uC810\\uC744 \\uC8FC\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), \"\\uB610\\uD55C \\uC0AD\\uC81C, \\uC218\\uC815\\uC774 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary my-2 m-1\",\n              onClick: () => navigate(\"/review/create\"),\n              children: \"CREATE REVIEW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"album py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3\",\n          children: reviewData.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-img-top zoom\",\n                style: {\n                  textAlign: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.img,\n                  className: \"bd-placeholder-img mt-4\",\n                  width: \"50%\",\n                  height: \"250\",\n                  role: \"img\",\n                  \"aria-label\": \"Placeholder: Thumbnail\",\n                  preserveAspectRatio: \"xMidYMid slice\",\n                  focusable: \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text\",\n                  children: /*#__PURE__*/_jsxDEV(Detailed, {\n                    item: item\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(ControlReview, {\n                    onClickDelBtn: onClickDeleteButton,\n                    userId: cookies.userId,\n                    shortId: item.shortId,\n                    item: item\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted m-3\",\n                      children: item.author.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted \",\n                      children: \"9 mins\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Review, \"t6JWiYwZXKF3jqTYvyNWIcWzMZ8=\", false, function () {\n  return [useNavigate, useCookies];\n});\n\n_c = Review;\nexport default Review;\n\nvar _c;\n\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["useNavigate","useState","useEffect","axios","backUrl","useCookies","Detailed","ControlReview","Review","navigate","cookies","setCookie","removeCookie","reviewData","setReviewData","undefined","getReviewData","get","url","headers","accessToken","userData","then","res","console","log","data","catch","e","deleteReview","shortId","onClickDeleteButton","window","confirm","getNewDataAfterDelete","filter","item","onClickUpdateButton","map","index","textAlign","img","userId","author","name"],"sources":["C:/Users/he125/OneDrive/바탕 화면/Dev/Git/Aihub_webTrack/Learn/week5/Day1/pr1_react/client/src/components/Review.js"],"sourcesContent":["// import reviewData from \"../data/review.json\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport backUrl from \"../data/port.json\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport Detailed from \"./Review/Detailed\";\r\nimport ControlReview from \"./Review/ControlReview\";\r\n\r\nconst Review = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [cookies, setCookie, removeCookie] = useCookies([\"userData\"]);\r\n  const [reviewData, setReviewData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (cookies === undefined) {\r\n      navigate(\"/\");\r\n    }\r\n    getReviewData(); //리뷰 데이터 가져오기\r\n  }, []); // 최초 1회 렌더링 시에만 동작\r\n\r\n  const getReviewData = () => {\r\n    try {\r\n      axios\r\n        .get(backUrl.url + \"/posts\", {\r\n          headers: {\r\n            // axios 요청으로 인증을 위해 함께 보낼 accessToken이 담긴 헤더 작성\r\n            accessToken: cookies.userData.accessToken,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          setReviewData(res.data);\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    } catch (e) {\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  // ------------삭제-----------\r\n  const deleteReview = async (shortId) => {\r\n    return await axios.get(backUrl.url + `/posts/${shortId}/delete`, {\r\n      headers: {\r\n        accessToken: cookies.userData.accessToken,\r\n      },\r\n    });\r\n  };\r\n  const onClickDeleteButton = (shortId) => {\r\n    if (window.confirm(\"삭제 하시겠습니까?\")) {\r\n      console.log(shortId);\r\n      deleteReview(shortId)\r\n        .then((res) => {\r\n          let getNewDataAfterDelete = reviewData.filter(\r\n            (item) => item.shortId !== shortId\r\n          );\r\n          setReviewData(getNewDataAfterDelete);\r\n        })\r\n        .catch((e) => {});\r\n    } else {\r\n      //아니오\r\n      return;\r\n    }\r\n  };\r\n  //---------------------------\r\n  //--------------Update-------\r\n  const onClickUpdateButton = (shortId) => {\r\n    \r\n  }\r\n  return (\r\n    <main>\r\n      <section className=\"py-5 text-center container\">\r\n        <div className=\"row py-lg-5\">\r\n          <div className=\"col-lg-6 col-md-8 mx-auto\">\r\n            <h1 className=\"fw-light\">Movie</h1>\r\n            <p className=\"lead text-muted\">\r\n              리뷰하고 싶은 영화를 추가하고, 별점을 주세요.\r\n              <br />\r\n              또한 삭제, 수정이 가능합니다.\r\n            </p>\r\n            <p>\r\n              <button\r\n                className=\"btn btn-primary my-2 m-1\"\r\n                onClick={() => navigate(\"/review/create\")}\r\n              >\r\n                CREATE REVIEW\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <div className=\"album py-5\">\r\n        <div className=\"container\">\r\n          <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3\">\r\n            {reviewData.map((item, index) => (\r\n              <div className=\"col\" key={index}>\r\n                <div className=\"card shadow-sm\">\r\n                  <div\r\n                    className=\"card-img-top zoom\"\r\n                    style={{ textAlign: \"center\" }}\r\n                  >\r\n                    <img\r\n                      src={item.img}\r\n                      className=\"bd-placeholder-img mt-4\"\r\n                      width=\"50%\"\r\n                      height=\"250\"\r\n                      role=\"img\"\r\n                      aria-label=\"Placeholder: Thumbnail\"\r\n                      preserveAspectRatio=\"xMidYMid slice\"\r\n                      focusable=\"false\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"card-body\">\r\n                    <p className=\"card-text\">\r\n                      <Detailed item={item} />\r\n                    </p>\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                      <ControlReview\r\n                        onClickDelBtn={onClickDeleteButton}\r\n                        userId={cookies.userId}\r\n                        shortId={item.shortId}\r\n                        item={item}\r\n                      />\r\n                      <div>\r\n                        <small className=\"text-muted m-3\">\r\n                          {item.author.name}\r\n                        </small>\r\n                        <small className=\"text-muted \">9 mins</small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Review;\r\n"],"mappings":";;;AAAA;AAEA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;;AAEA,MAAMC,MAAM,GAAG,MAAM;EAAA;;EACnB,MAAMC,QAAQ,GAAGT,WAAW,EAA5B;EAEA,MAAM,CAACU,OAAD,EAAUC,SAAV,EAAqBC,YAArB,IAAqCP,UAAU,CAAC,CAAC,UAAD,CAAD,CAArD;EACA,MAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C;EAEAC,SAAS,CAAC,MAAM;IACd,IAAIQ,OAAO,KAAKK,SAAhB,EAA2B;MACzBN,QAAQ,CAAC,GAAD,CAAR;IACD;;IACDO,aAAa,GAJC,CAIG;EAClB,CALQ,EAKN,EALM,CAAT,CANmB,CAWX;;EAER,MAAMA,aAAa,GAAG,MAAM;IAC1B,IAAI;MACFb,KAAK,CACFc,GADH,CACOb,OAAO,CAACc,GAAR,GAAc,QADrB,EAC+B;QAC3BC,OAAO,EAAE;UACP;UACAC,WAAW,EAAEV,OAAO,CAACW,QAAR,CAAiBD;QAFvB;MADkB,CAD/B,EAOGE,IAPH,CAOSC,GAAD,IAAS;QACbC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACAT,aAAa,CAACS,GAAG,CAACG,IAAL,CAAb;MACD,CAVH,EAWGC,KAXH,CAWUC,CAAD,IAAO;QACZJ,OAAO,CAACC,GAAR,CAAYG,CAAZ;MACD,CAbH;IAcD,CAfD,CAeE,OAAOA,CAAP,EAAU;MACVnB,QAAQ,CAAC,GAAD,CAAR;IACD;EACF,CAnBD,CAbmB,CAkCnB;;;EACA,MAAMoB,YAAY,GAAG,MAAOC,OAAP,IAAmB;IACtC,OAAO,MAAM3B,KAAK,CAACc,GAAN,CAAUb,OAAO,CAACc,GAAR,GAAe,UAASY,OAAQ,SAA1C,EAAoD;MAC/DX,OAAO,EAAE;QACPC,WAAW,EAAEV,OAAO,CAACW,QAAR,CAAiBD;MADvB;IADsD,CAApD,CAAb;EAKD,CAND;;EAOA,MAAMW,mBAAmB,GAAID,OAAD,IAAa;IACvC,IAAIE,MAAM,CAACC,OAAP,CAAe,YAAf,CAAJ,EAAkC;MAChCT,OAAO,CAACC,GAAR,CAAYK,OAAZ;MACAD,YAAY,CAACC,OAAD,CAAZ,CACGR,IADH,CACSC,GAAD,IAAS;QACb,IAAIW,qBAAqB,GAAGrB,UAAU,CAACsB,MAAX,CACzBC,IAAD,IAAUA,IAAI,CAACN,OAAL,KAAiBA,OADD,CAA5B;QAGAhB,aAAa,CAACoB,qBAAD,CAAb;MACD,CANH,EAOGP,KAPH,CAOUC,CAAD,IAAO,CAAE,CAPlB;IAQD,CAVD,MAUO;MACL;MACA;IACD;EACF,CAfD,CA1CmB,CA0DnB;EACA;;;EACA,MAAMS,mBAAmB,GAAIP,OAAD,IAAa,CAExC,CAFD;;EAGA,oBACE;IAAA,wBACE;MAAS,SAAS,EAAC,4BAAnB;MAAA,uBACE;QAAK,SAAS,EAAC,aAAf;QAAA,uBACE;UAAK,SAAS,EAAC,2BAAf;UAAA,wBACE;YAAI,SAAS,EAAC,UAAd;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAG,SAAS,EAAC,iBAAb;YAAA,qJAEE;cAAA;cAAA;cAAA;YAAA,QAFF;UAAA;YAAA;YAAA;YAAA;UAAA,QAFF,eAOE;YAAA,uBACE;cACE,SAAS,EAAC,0BADZ;cAEE,OAAO,EAAE,MAAMrB,QAAQ,CAAC,gBAAD,CAFzB;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QAPF;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAsBE;MAAK,SAAS,EAAC,YAAf;MAAA,uBACE;QAAK,SAAS,EAAC,WAAf;QAAA,uBACE;UAAK,SAAS,EAAC,gDAAf;UAAA,UACGI,UAAU,CAACyB,GAAX,CAAe,CAACF,IAAD,EAAOG,KAAP,kBACd;YAAK,SAAS,EAAC,KAAf;YAAA,uBACE;cAAK,SAAS,EAAC,gBAAf;cAAA,wBACE;gBACE,SAAS,EAAC,mBADZ;gBAEE,KAAK,EAAE;kBAAEC,SAAS,EAAE;gBAAb,CAFT;gBAAA,uBAIE;kBACE,GAAG,EAAEJ,IAAI,CAACK,GADZ;kBAEE,SAAS,EAAC,yBAFZ;kBAGE,KAAK,EAAC,KAHR;kBAIE,MAAM,EAAC,KAJT;kBAKE,IAAI,EAAC,KALP;kBAME,cAAW,wBANb;kBAOE,mBAAmB,EAAC,gBAPtB;kBAQE,SAAS,EAAC;gBARZ;kBAAA;kBAAA;kBAAA;gBAAA;cAJF;gBAAA;gBAAA;gBAAA;cAAA,QADF,eAiBE;gBAAK,SAAS,EAAC,WAAf;gBAAA,wBACE;kBAAG,SAAS,EAAC,WAAb;kBAAA,uBACE,QAAC,QAAD;oBAAU,IAAI,EAAEL;kBAAhB;oBAAA;oBAAA;oBAAA;kBAAA;gBADF;kBAAA;kBAAA;kBAAA;gBAAA,QADF,eAIE;kBAAK,SAAS,EAAC,mDAAf;kBAAA,wBACE,QAAC,aAAD;oBACE,aAAa,EAAEL,mBADjB;oBAEE,MAAM,EAAErB,OAAO,CAACgC,MAFlB;oBAGE,OAAO,EAAEN,IAAI,CAACN,OAHhB;oBAIE,IAAI,EAAEM;kBAJR;oBAAA;oBAAA;oBAAA;kBAAA,QADF,eAOE;oBAAA,wBACE;sBAAO,SAAS,EAAC,gBAAjB;sBAAA,UACGA,IAAI,CAACO,MAAL,CAAYC;oBADf;sBAAA;sBAAA;sBAAA;oBAAA,QADF,eAIE;sBAAO,SAAS,EAAC,aAAjB;sBAAA;oBAAA;sBAAA;sBAAA;sBAAA;oBAAA,QAJF;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAPF;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA,QAJF;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAjBF;YAAA;cAAA;cAAA;cAAA;YAAA;UADF,GAA0BL,KAA1B;YAAA;YAAA;YAAA;UAAA,QADD;QADH;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAtBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAwED,CAvID;;GAAM/B,M;UACaR,W,EAE0BK,U;;;KAHvCG,M;AAyIN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}